# Generated by cucumber-sinatra. (2013-12-03 12:11:29 +0000)

require 'coveralls'
Coveralls.wear_merged!

require 'dotenv'
Dotenv.load

ENV['RACK_ENV'] = 'test'
ENV['METRICS_API_USERNAME'] = 'foo'
ENV['METRICS_API_PASSWORD'] = 'bar'

require File.join(File.dirname(__FILE__), '..', '..', 'lib/bothan.rb')

require 'capybara'
require 'capybara/cucumber'
require 'capybara-webkit'
require 'rspec'
require 'cucumber/api_steps'
require 'cucumber/rspec/doubles'
require 'database_cleaner'
require 'database_cleaner/cucumber'
require 'timecop'
require 'launchy'
require 'byebug'

DatabaseCleaner.strategy = :truncation

Capybara.javascript_driver = :webkit # not sure why this isn't enabled, doesnt impede existing features
Capybara::Webkit.configure do |config|
  config.allow_url("0.0.0.0")
end

Capybara.app = Bothan::App
Capybara.app_host = "http://0.0.0.0:3000"
Capybara.server_port = 3000

class Bothan::AppWorld
  include Capybara::DSL
  include RSpec::Expectations
  include RSpec::Matchers

  def app
    Bothan::App
  end
end

World do
  Bothan::AppWorld.new
end
